// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.13/esri/copyright.txt for details.
//>>built
require({cache:{"url:esri/dijit/templates/VectorFieldRenderer.html":'\x3cdiv data-dojo-attach-point\x3d"_vectorFieldRendererContainer" class\x3d"esriVFRContainer"\x3e\r\n  \x3ctable class\x3d"esriVFRTable"\x3e\r\n    \x3ctr\x3e\r\n      \x3ctd colspan\x3d"2"\x3e\r\n        \x3clabel class\x3d"esriVFRSymbolTitle"\x3e${_i18n.widgets.vectorFieldRenderer.symbolTypeLabelTitle}\x3c/label\x3e\r\n      \x3c/td\x3e\r\n    \x3c/tr\x3e\r\n    \x3ctr\x3e\r\n      \x3ctd colspan\x3d"2"\x3e\r\n        \x3ctable class\x3d"esriVFRTypeBlock"\x3e\r\n\r\n          \x3ctr\x3e\r\n            \x3ctd\x3e\r\n              \x3cdiv class\x3d"esriVFRTypeList" data-dojo-type\x3d"dijit/form/FilteringSelect" data-dojo-attach-point\x3d"rendererTypeSelect" data-dojo-attach-event\x3d"onChange: _selectRendererStyle"\x3e\x3c/div\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd class\x3d"esriVFRColorPickerCell"\x3e\r\n              \x3cdiv class\x3d"esriVFRColorButton" data-dojo-type\x3d"dijit/form/DropDownButton" data-dojo-attach-point\x3d"colorPickerButton"\x3e\r\n                \x3cspan\x3e\x3c/span\x3e\r\n                \x3cdiv data-dojo-type\x3d"esri/dijit/ColorPicker" data-dojo-attach-point\x3d"symbolColorPicker" class\x3d"esriVFRColorPicker"\x3e\x3c/div\x3e\r\n              \x3c/div\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n        \x3c/table\x3e\r\n      \x3c/td\x3e\r\n    \x3c/tr\x3e\r\n    \x3ctr\x3e\r\n      \x3ctd colspan\x3d"2"\x3e\r\n        \x3clabel\x3e${_i18n.widgets.vectorFieldRenderer.dataTypeLabelTile}\x3c/label\x3e\r\n      \x3c/td\x3e\r\n    \x3c/tr\x3e\r\n    \x3ctr\x3e\r\n      \x3ctd colspan\x3d"2"\x3e\r\n        \x3cselect data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"flowAngleSelect" class\x3d"esriVFRFlowAngleList" data-dojo-attach-event\x3d"onChange: _setPropertiesChanged"\x3e\r\n          \x3coption value\x3d"FLOW_FROM" selected\x3d"selected"\x3e${_i18n.widgets.vectorFieldRenderer.angleFromAlias}\x3c/option\x3e\r\n          \x3coption value\x3d"FLOW_TO"\x3e${_i18n.widgets.vectorFieldRenderer.angleToAlias}\x3c/option\x3e\r\n        \x3c/select\x3e\r\n      \x3c/td\x3e\r\n    \x3c/tr\x3e\r\n\r\n    \x3ctr\x3e\r\n      \x3ctd colspan\x3d"2"\x3e\r\n        \x3clabel\x3e${_i18n.widgets.vectorFieldRenderer.symbolDensityLabelTitle}\x3c/label\x3e\r\n        \x3clabel class\x3d"esriVFRBold" data-dojo-attach-point\x3d"symbolDensitySliderValueLabel"\x3e\x3c/label\x3e\r\n      \x3c/td\x3e\r\n    \x3c/tr\x3e\r\n    \x3ctr\x3e\r\n      \x3ctd colspan\x3d"2" class\x3d"esriVFRTileSizeSlider"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"symbolDensitySliderDiv"\x3e\x3c/div\x3e\r\n      \x3c/td\x3e\r\n    \x3c/tr\x3e\r\n    \x3ctr\x3e\r\n      \x3ctd colspan\x3d"2"\x3e\r\n        \x3clabel\x3e${_i18n.widgets.vectorFieldRenderer.symbolSizeLabelTitle}\x3c/label\x3e\r\n        \x3clabel class\x3d"esriVFRBold" data-dojo-attach-point\x3d"symbolSizeSliderValueLabel"\x3e\x3c/label\x3e\r\n      \x3c/td\x3e\r\n    \x3c/tr\x3e\r\n    \x3ctr\x3e\r\n      \x3ctd colspan\x3d"2" class\x3d"esriVFRSymbolSizeSlider"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"symbolSizeSliderDiv"\x3e\x3c/div\x3e\r\n      \x3c/td\x3e\r\n    \x3c/tr\x3e\r\n    \x3ctr\x3e\r\n      \x3ctd colspan\x3d"2"\x3e\r\n        \x3cdiv data-dojo-type\x3d"dijit/TitlePane" data-dojo-props\x3d"open: false" data-dojo-attach-point\x3d"advancedSettingsPane"\x3e\r\n          \x3ctable class\x3d"esriVFRAdvSettingsTable"\x3e\r\n            \x3ccolgroup\x3e\r\n              \x3ccol class\x3d"esriAdvSettingsCol1" /\x3e\r\n              \x3ccol class\x3d"esriAdvSettingsCol2" /\x3e\r\n            \x3c/colgroup\x3e\r\n            \x3ctr\x3e\r\n              \x3ctd colspan\x3d"2"\x3e\r\n                \x3clabel\x3e${_i18n.widgets.vectorFieldRenderer.unitLabelTitle}\x3c/label\x3e\r\n              \x3c/td\x3e\r\n            \x3c/tr\x3e\r\n            \x3ctr\x3e\r\n              \x3ctd\x3e\r\n                \x3clabel\x3e${_i18n.widgets.vectorFieldRenderer.inputUnitLabelTitle}\x3c/label\x3e\r\n              \x3c/td\x3e\r\n              \x3ctd\x3e\r\n                \x3cselect data-dojo-type\x3d"dijit/form/Select" class\x3d"esriVFRUnitsList" data-dojo-attach-point\x3d"inputDataUnitSelect" data-dojo-attach-event\x3d"onChange: _onInputUnitChange"\x3e\r\n                  \x3coption value\x3d"NO_UNIT"\x3e\x3c/option\x3e\r\n                  \x3coption value\x3d"esriMetersPerSecond"\x3e${_i18n.widgets.vectorFieldRenderer.esriMetersPerSecond}\x3c/option\x3e\r\n                  \x3coption value\x3d"esriKilometersPerHour"\x3e${_i18n.widgets.vectorFieldRenderer.esriKilometersPerHour}\x3c/option\x3e\r\n                  \x3coption value\x3d"esriKnots"\x3e${_i18n.widgets.vectorFieldRenderer.esriKnots}\x3c/option\x3e\r\n                  \x3coption value\x3d"esriFeetPerSecond"\x3e${_i18n.widgets.vectorFieldRenderer.esriFeetPerSecond}\x3c/option\x3e\r\n                  \x3coption value\x3d"esriMilesPerHour"\x3e${_i18n.widgets.vectorFieldRenderer.esriMilesPerHour}\x3c/option\x3e\r\n                \x3c/select\x3e\r\n              \x3c/td\x3e\r\n            \x3c/tr\x3e\r\n            \x3ctr\x3e\r\n              \x3ctd\x3e\r\n                \x3clabel\x3e${_i18n.widgets.vectorFieldRenderer.outputUnitLabelTitle}\x3c/label\x3e\r\n              \x3c/td\x3e\r\n              \x3ctd\x3e\r\n                \x3cselect data-dojo-type\x3d"dijit/form/Select" class\x3d"esriVFRUnitsList" disabled\x3d"disabled" data-dojo-attach-point\x3d"outputDataUnitSelect" data-dojo-attach-event\x3d"onChange: _onOutputUnitChange"\x3e\r\n                  \x3coption value\x3d"NO_UNIT"\x3e\x3c/option\x3e\r\n                  \x3coption value\x3d"esriMetersPerSecond"\x3e${_i18n.widgets.vectorFieldRenderer.esriMetersPerSecond}\x3c/option\x3e\r\n                  \x3coption value\x3d"esriKilometersPerHour"\x3e${_i18n.widgets.vectorFieldRenderer.esriKilometersPerHour}\x3c/option\x3e\r\n                  \x3coption value\x3d"esriKnots"\x3e${_i18n.widgets.vectorFieldRenderer.esriKnots}\x3c/option\x3e\r\n                  \x3coption value\x3d"esriFeetPerSecond"\x3e${_i18n.widgets.vectorFieldRenderer.esriFeetPerSecond}\x3c/option\x3e\r\n                  \x3coption value\x3d"esriMilesPerHour"\x3e${_i18n.widgets.vectorFieldRenderer.esriMilesPerHour}\x3c/option\x3e\r\n                \x3c/select\x3e\r\n              \x3c/td\x3e\r\n            \x3c/tr\x3e\r\n            \x3ctr class\x3d"esriVFRDataRangeLabelRow"\x3e\r\n              \x3ctd colspan\x3d"2"\x3e\r\n                \x3clabel\x3e${_i18n.widgets.vectorFieldRenderer.dataValueRangeLabelTitle}\x3c/label\x3e\x3clabel data-dojo-attach-point\x3d"dataValueRangeUnit"\x3e.\x3c/label\x3e\r\n              \x3c/td\x3e\r\n            \x3c/tr\x3e\r\n            \x3ctr class\x3d"esriVFRMinValueRow"\x3e\r\n              \x3ctd\x3e\r\n                \x3clabel\x3e${_i18n.widgets.vectorFieldRenderer.minAlias}\x3c/label\x3e\r\n              \x3c/td\x3e\r\n              \x3ctd\x3e\r\n                \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/NumberTextBox" class\x3d"esriVFRMinMagInput" data-dojo-attach-point\x3d"minMagnitudeInput" data-dojo-attach-event\x3d"onChange: _setPropertiesChanged"/\x3e\r\n              \x3c/td\x3e\r\n            \x3c/tr\x3e\r\n            \x3ctr\x3e\r\n              \x3ctd\x3e\r\n                \x3clabel\x3e${_i18n.widgets.vectorFieldRenderer.maxAlias}\x3c/label\x3e\r\n              \x3c/td\x3e\r\n              \x3ctd\x3e\r\n                \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/NumberTextBox" class\x3d"esriVFRMaxMagInput" data-dojo-attach-point\x3d"maxMagnitudeInput" data-dojo-attach-event\x3d"onChange: _setPropertiesChanged"/\x3e\r\n              \x3c/td\x3e\r\n            \x3c/tr\x3e\r\n          \x3c/table\x3e\r\n        \x3c/div\x3e\r\n      \x3c/td\x3e\r\n    \x3c/tr\x3e\r\n    \x3ctr\x3e\r\n      \x3ctd colspan\x3d"2" data-dojo-type\x3d"dijit/form/Button" data-dojo-attach-event\x3d"onClick: _onClickApplyVectorFieldRenderer" data-dojo-attach-point\x3d"applyButton"\x3e${_i18n.widgets.vectorFieldRenderer.applyLabelTitle}\r\n      \x3c/td\x3e\r\n    \x3c/tr\x3e\r\n  \x3c/table\x3e\r\n\x3c/div\x3e\r\n'}});
define("esri/dijit/VectorFieldRenderer","dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/_base/array dojo/i18n!../nls/jsapi dojo/text!./templates/VectorFieldRenderer.html dojo/store/Memory dojo/data/ObjectStore dojo/has dojo/query dojo/dom-style dojo/dom-construct ../kernel ../renderers/VectorFieldRenderer ../Color ../lang dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/form/HorizontalSlider dijit/form/HorizontalRuleLabels dojox/form/HorizontalRangeSlider dojox/gfx require dijit/form/FilteringSelect dijit/form/RadioButton dijit/form/Select ./ColorPicker dijit/form/DropDownButton dijit/TitlePane dijit/form/NumberTextBox dijit/form/Button".split(" "),
function(m,g,n,l,w,h,q,x,y,r,k,s,z,b,t,u,A,B,C,D,v,E,p,F){h=m([A,B,C],{templateString:h,declaredClass:"esri.dijit.VectorFieldRenderer",widgetsInTemplate:!0,layer:null,map:null,_rendererTypes:"simpleScalar singleArrow windBarbs beaufort oceanCurrentKnots oceanCurrentMps classifiedArrow".split(" "),_rendererTypeData:[],_vfrObject:null,_defaultVFRName:"classifiedArrow",basePath:F.toUrl("."),propertiesChanged:!0,resetAvailable:!0,constructor:function(a){m.safeMixin(this,a);this._i18n=w;this._setupDefaults()},
startup:function(a){this.inherited(arguments);var c=this;this._arrowSymbolButtonNode=r(".dijitButtonNode",r(".esriVFRColorButton")[0])[0];this.symbolColorPicker.onColorChange=function(a){c._updateArrowSymbolButton();c.propertiesChanged=!0};n.subscribe("onVectorFieldRendererApply",g.hitch(this,"_onClickApplyVectorFieldRenderer"));n.subscribe("onVectorFieldRendererReset",g.hitch(this,"_onClickResetVectorFieldRenderer"));this.startupCalled=!0},postCreate:function(a){this.inherited(arguments);var c=this;
this.advancedSettingsPane.set("title",this._i18n.widgets.vectorFieldRenderer.advancedOptionsTitle);this.minMagnitudeInput.set("invalidMessage",this._i18n.widgets.vectorFieldRenderer.invalidNumberMessage);this.maxMagnitudeInput.set("invalidMessage",this._i18n.widgets.vectorFieldRenderer.invalidNumberMessage);k.set(this.symbolColorPicker.dap_transparencySection,"display","none");this._popuplateRendererList();this._createTileSizeSlider();this._createSymbolSizeSlider();this.hideApplyButton&&k.set(this.applyButton.domNode,
"display","none");if(this.layer.loaded)this._loadVFRArguments();else this.layer.on("load",function(){c._loadVFRArguments()})},_setLayerAttr:function(a){if(a&&this.startupCalled){var c=this;this.layer=a;this.inherited(arguments);this.advancedSettingsPane.set("open",!1);if(this.layer.loaded)this._loadVFRArguments();else this.layer.on("load",function(){c._loadVFRArguments()})}},_addRendererTypeToList:function(a,c,f,b){var e={};e.label="\x3chtml\x3e\x3cbody\x3e\x3csection\x3e\x3ctable\x3e\x3ctr\x3e\x3ctd colspan\x3d'2'\x3e\x3cb\x3e"+
a+"\x3cb\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3cimg src\x3d'"+b+"' height\x3d'90' width\x3d'90'\x3e\x3c/td\x3e\x3ctd\x3e\x3cp style\x3d'white-space:pre-wrap;width:35ex;'\x3e\x3ci\x3e"+c+"\x3c/i\x3e\x3c/p\x3e\x3ctd\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/section\x3e\x3c/body\x3e\x3c/html\x3e";e.name=a;e.desc=c;e.id=f;this._rendererTypeData.push(e)},_popuplateRendererList:function(){var a=this;l.forEach(this._rendererTypes,function(c){a._addRendererTypeToList(a._i18n.widgets.vectorFieldRenderer[c+
"LabelTitle"],a._i18n.widgets.vectorFieldRenderer[c+"Desc"],c,a.basePath+"/images/vfr_"+c+".png")});this._rendererTypeStore=new q({data:this._rendererTypeData});this.rendererTypeSelect.set("store",this._rendererTypeStore);this.rendererTypeSelect.set("labelAttr","label");this.rendererTypeSelect.set("labelType","html")},_createTileSizeSlider:function(){var a=this,c=[],b,d=s.create("div");this.symbolDensitySliderDiv.appendChild(d);for(b=0;80>b;b++)0===b?c.push(this._i18n.widgets.vectorFieldRenderer.sparseTileSizeAlias):
79===b?c.push(this._i18n.widgets.vectorFieldRenderer.denseTileSizeAlias):c.push("");new v({labels:c,labelStyle:"font-size: 75%"},d);this._symbolDensitySlider=new D({value:0.02,minimum:0.01,maximum:0.05,intermediateChanges:!1,discreteValues:81,style:"width: 100%",onChange:function(c){a._setPropertiesChanged()}},this.symbolDensitySliderDiv)},_createSymbolSizeSlider:function(){var a=this,c=[],b,d=s.create("div");this.symbolSizeSliderDiv.appendChild(d);for(b=0;100>b;b++)0===b?c.push(this._i18n.widgets.vectorFieldRenderer.minSymbolSizeAlias):
99===b?c.push(this._i18n.widgets.vectorFieldRenderer.maxSymbolSizeAlias):c.push("");new v({labels:c,labelStyle:"font-size: 75%"},d);this._symbolSizeSlider=new E({value:[20,80],minimum:0,maximum:100,discreteValues:101,intermediateChanges:!1,style:"width: 100%",onChange:function(c){a._setPropertiesChanged()}},this.symbolSizeSliderDiv)},_selectRendererStyle:function(a){"singleArrow"===a?this._showColorPickerButton():this._hideColorPickerButton();this._refreshOutputUnitSelect();this.layer.getFlowRepresentation()||
("beaufort"===a||"windBarbs"===a?this.flowAngleSelect.set("value","FLOW_FROM"):"oceanCurrent"===a&&this.flowAngleSelect.set("value","FLOW_TO"));this.propertiesChanged=!0},_showColorPickerButton:function(){var a=this.singleArrowDefaultColor;this.layer.renderer&&(this.layer.renderer.renderer&&this.layer.renderer.renderer.defaultSymbol&&this.layer.rendererStyle==b.STYLE_SINGLE_ARROW)&&this.layer.renderer.renderer.defaultSymbol.color;this.symbolColorPicker.set("color",a);k.set(this.colorPickerButton.domNode,
"display","block")},_hideColorPickerButton:function(){k.set(this.colorPickerButton.domNode,"display","none")},_setupDefaults:function(){this.singleArrowDefaultColor=new t([0,92,230])},_loadVFRArguments:function(){if(!this.layer||!this.layer.renderer)return console.log("Layer not present");this._loadVFRStyle();this._loadSymbolSizeValues();this._loadTileSizeValue();this._loadMinMaxValues();this._loadAngleDirection();this._loadColor();this._loadUnits()},_loadVFRStyle:function(){switch(this.layer.renderer.style){case b.STYLE_SCALAR:this.rendererTypeSelect.set("value",
this._rendererTypes[0]);break;case b.STYLE_SINGLE_ARROW:this.rendererTypeSelect.set("value",this._rendererTypes[1]);this._loadColor();break;case b.STYLE_BEAUFORT_KN:case b.STYLE_BEAUFORT_METER:case b.STYLE_BEAUFORT_MILE:case b.STYLE_BEAUFORT_FEET:case b.STYLE_BEAUFORT_KM:this.rendererTypeSelect.set("value",this._rendererTypes[3]);break;case b.STYLE_OCEAN_CURRENT_M:this.rendererTypeSelect.set("value",this._rendererTypes[5]);break;case b.STYLE_OCEAN_CURRENT_KN:this.rendererTypeSelect.set("value",this._rendererTypes[4]);
break;case b.STYLE_CLASSIFIED_ARROW:this.rendererTypeSelect.set("value",this._rendererTypes[6]);break;case b.STYLE_WIND_BARBS:this.rendererTypeSelect.set("value",this._rendererTypes[2]);break;default:this.rendererTypeSelect.set("value",this._rendererTypes[1])}},_loadSymbolSizeValues:function(){var a=20,c=80,b;l.forEach(this.layer.renderer.visualVariables,function(a){"sizeInfo"===a.type&&(b=a)});b&&(b.minSize&&b.maxSize&&this.layer.graphics.length)&&(a=100*(b.minSize/this.layer.symbolTileSize),c=100*
(b.maxSize/this.layer.symbolTileSize));this._symbolSizeSlider.set("value",[a,c])},_loadTileSizeValue:function(){this._symbolDensitySlider.set("value",this.layer.symbolTileSize?1/this.layer.symbolTileSize:0.02)},_loadMinMaxValues:function(){var a;l.forEach(this.layer.renderer.visualVariables,function(b){"sizeInfo"===b.type&&(a=b)});this.minMagnitudeInput.set("value",a&&u.isDefined(a.minDataValue)?a.minDataValue:"");this.maxMagnitudeInput.set("value",a&&u.isDefined(a.maxDataValue)?a.maxDataValue:"")},
_loadAngleDirection:function(){var a=this.layer.getFlowRepresentation(),c=a?!0:!1,f="FLOW_FROM",f=c?a==b.FLOW_TO?"FLOW_TO":"FLOW_FROM":this.layer.renderer.flowRepresentation==b.FLOW_TO?"FLOW_TO":"FLOW_FROM";this.flowAngleSelect.set("value",f);this.flowAngleSelect.set("disabled",c)},_loadColor:function(){this.layer.renderer&&(this.layer.renderer.renderer&&this.layer.renderer.renderer.defaultSymbol&&this.startupCalled)&&(this.symbolColorPicker.set("color",this.layer.renderer.renderer.defaultSymbol.color),
this._updateArrowSymbolButton())},_loadUnits:function(){this.layer.vectorFieldPixelFilter&&(this.layer.vectorFieldPixelFilter.inputUnit?this.inputDataUnitSelect.set("value",this.layer.vectorFieldPixelFilter.inputUnit):this.inputDataUnitSelect.set("value","NO_UNIT"),this.layer.vectorFieldPixelFilter.outputUnit&&this.outputDataUnitSelect.set("value",this.layer.vectorFieldPixelFilter.outputUnit))},_onOutputUnitChange:function(a){this.dataValueRangeUnit.innerHTML=a&&"NO_UNIT"!=a?" in \x3cstrong\x3e"+
this._i18n.widgets.vectorFieldRenderer[a]+"\x3c/strong\x3e.":".";this.propertiesChanged=!0},_onClickApplyVectorFieldRenderer:function(){if(this.propertiesChanged){var a=b.STYLE_SINGLE_ARROW,c,f,d,e,g,h,k;d=Math.floor(1/this._symbolDensitySlider.value);c=p.px2pt(this._symbolSizeSlider.value[0]/100*d);f=p.px2pt(this._symbolSizeSlider.value[1]/100*d);e=!isNaN(this.minMagnitudeInput.value)?this.minMagnitudeInput.value:null;g=!isNaN(this.maxMagnitudeInput.value)?this.maxMagnitudeInput.value:null;h=b[this.flowAngleSelect.value];
"singleArrow"==this.rendererTypeSelect.value?a=b.STYLE_SINGLE_ARROW:"simpleScalar"==this.rendererTypeSelect.value?a=b.STYLE_SCALAR:"beaufort"==this.rendererTypeSelect.value?"esriKnots"==this.outputDataUnitSelect.value?a=b.STYLE_BEAUFORT_KN:"esriMetersPerSecond"==this.outputDataUnitSelect.value?a=b.STYLE_BEAUFORT_METER:"esriMilesPerHour"==this.outputDataUnitSelect.value?a=b.STYLE_BEAUFORT_MILE:"esriKilometersPerHour"==this.outputDataUnitSelect.value&&(a=b.STYLE_BEAUFORT_KM):"oceanCurrentKnots"==this.rendererTypeSelect?
a=b.STYLE_OCEAN_CURRENT_KN:"oceanCurrentMps"==this.rendererTypeSelect?a=b.STYLE_OCEAN_CURRENT_M:"classifiedArrow"==this.rendererTypeSelect?a=b.STYLE_CLASSIFIED_ARROW:"windBarbs"==this.rendererTypeSelect&&(a=b.STYLE_WIND_BARBS);this.symbolColorPicker&&this.symbolColorPicker.color&&(k=this.layer.renderer._getDefaultSymbol(new t(this.symbolColorPicker.color)));var l="NO_UNIT"!==this.inputDataUnitSelect.value?this.inputDataUnitSelect.value:"",m="NO_UNIT"!==this.outputDataUnitSelect.value?this.outputDataUnitSelect.value:
"";this.layer.vectorFieldPixelFilter.setUnits(l,m);this.layer.rendererStyle=a;var n=[];n.push({type:"sizeInfo",minSize:c,maxSize:f,minDataValue:e,maxDataValue:g});a=new b({style:a,visualVariables:n,flowRepresentation:h,singleArrowSymbol:k||null,outputUnit:m,inputUnit:l});this.layer.setRenderer(a);this.layer.symbolTileSize!==d?(this.layer.symbolTileSize=d,this.layer.refresh()):this.layer.redraw();this._loadVFRStyle();this.propertiesChanged=!1;this.resetAvailable=!0}},_onClickResetVectorFieldRenderer:function(){if(this.layer&&
(this.propertiesChanged||this.resetAvailable)){var a=this;this.layer.symbolTileSize=50;this.layer.setVectorRendererStyle(b.STYLE_SINGLE_ARROW);var c=Math.floor(1/this._symbolDensitySlider.value);this.layer.vectorFieldPixelFilter&&this.layer.vectorFieldPixelFilter.setUnits(null,null);this.layer.symbolTileSize!==c?this.layer.refresh():this.layer.redraw();this._loadVFRArguments();this.resetAvailable=this.propertiesChanged=!1;setTimeout(function(){a.propertiesChanged=!1},500)}},_updateArrowSymbolButton:function(a){this._arrowSymbolButtonNode.innerHTML=
"";var b=p.createSurface(this._arrowSymbolButtonNode,24,24);a=b.createShape({type:"path",path:"M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z"}).setFill(a?a:this.symbolColorPicker.color);b.getDimensions();var f={dx:0,dy:0},d=a.getBoundingBox(),e=d.width,d=d.height;if(24>e||24>d)e=(e+5)/24,g.mixin(f,{xx:e,yy:e});a.applyTransform(f);return b},_onInputUnitChange:function(a){"NO_UNIT"!=a||"beaufort"==this.rendererTypeSelect.value||"oceanCurrent"==this.rendererTypeSelect.value?this.outputDataUnitSelect.set("disabled",
!1):(this.outputDataUnitSelect.set("value","NO_UNIT"),this.outputDataUnitSelect.set("disabled",!0));this.propertiesChanged=!0},_refreshOutputUnitSelect:function(){this._outputUnits=[];"oceanCurrentMps"!=this.rendererTypeSelect.value&&this._outputUnits.push({id:"esriKnots",label:this._i18n.widgets.vectorFieldRenderer.esriKnots});"oceanCurrentKnots"!=this.rendererTypeSelect.value&&"windBarbs"!=this.rendererTypeSelect.value&&(this._outputUnits.push({id:"esriMetersPerSecond",label:this._i18n.widgets.vectorFieldRenderer.esriMetersPerSecond}),
"oceanCurrentMps"!=this.rendererTypeSelect.value&&(this._outputUnits.push({id:"esriKilometersPerHour",label:this._i18n.widgets.vectorFieldRenderer.esriKilometersPerHour}),this._outputUnits.push({id:"esriMilesPerHour",label:this._i18n.widgets.vectorFieldRenderer.esriMilesPerHour}),"beaufort"!=this.rendererTypeSelect.value&&(this._outputUnits.push({id:"esriFeetPerSecond",label:this._i18n.widgets.vectorFieldRenderer.esriFeetPerSecond}),this._outputUnits.push({id:"NO_UNIT",label:" ",selected:!0}))));
var a=new q({data:this._outputUnits}),a=new x({objectStore:a});this.outputDataUnitSelect.set("store",a);"oceanCurrentKnots"===this.rendererTypeSelect.value||"beaufort"===this.rendererTypeSelect.value?this.outputDataUnitSelect.set("value","esriKnots"):"oceanCurrentMps"===this.rendererTypeSelect.value&&this.outputDataUnitSelect.set("value","esriMetersPerSecond")},_setPropertiesChanged:function(){this.propertiesChanged=!0}});y("extend-esri")&&g.setObject("dijit.VectorFieldRenderer",h,z);return h});