/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

/*
	This is an optimized version of Dojo, built for deployment and not for
	development. To get sources and documentation, please visit:

		http://dojotoolkit.org
*/

//>>built
require({cache:{"dojox/gfx/shape":function(){define("./_base dojo/_base/lang dojo/_base/declare dojo/_base/kernel dojo/_base/sniff dojo/on dojo/_base/array dojo/dom-construct dojo/_base/Color ./matrix".split(" "),function(b,g,h,v,q,n,d,m,x,c){var f=b.shape={};f.Shape=h("dojox.gfx.shape.Shape",null,{constructor:function(){this.parentMatrix=this.parent=this.bbox=this.strokeStyle=this.fillStyle=this.matrix=this.shape=this.rawNode=null;if(q("gfxRegistry")){var a=f.register(this);this.getUID=function(){return a}}},
destroy:function(){q("gfxRegistry")&&f.dispose(this);this.rawNode&&"__gfxObject__"in this.rawNode&&(this.rawNode.__gfxObject__=null);this.rawNode=null},getNode:function(){return this.rawNode},getShape:function(){return this.shape},getTransform:function(){return this.matrix},getFill:function(){return this.fillStyle},getStroke:function(){return this.strokeStyle},getParent:function(){return this.parent},getBoundingBox:function(){return this.bbox},getTransformedBoundingBox:function(){var a=this.getBoundingBox();
if(!a)return null;var r=this._getRealMatrix();return[c.multiplyPoint(r,a.x,a.y),c.multiplyPoint(r,a.x+a.width,a.y),c.multiplyPoint(r,a.x+a.width,a.y+a.height),c.multiplyPoint(r,a.x,a.y+a.height)]},getEventSource:function(){return this.rawNode},setClip:function(a){this.clip=a},getClip:function(){return this.clip},setShape:function(a){this.shape=b.makeParameters(this.shape,a);this.bbox=null;return this},setFill:function(a){if(!a)return this.fillStyle=null,this;var c=null;if("object"==typeof a&&"type"in
a)switch(a.type){case "linear":c=b.makeParameters(b.defaultLinearGradient,a);break;case "radial":c=b.makeParameters(b.defaultRadialGradient,a);break;case "pattern":c=b.makeParameters(b.defaultPattern,a)}else c=b.normalizeColor(a);this.fillStyle=c;return this},setStroke:function(a){if(!a)return this.strokeStyle=null,this;if("string"==typeof a||g.isArray(a)||a instanceof x)a={color:a};a=this.strokeStyle=b.makeParameters(b.defaultStroke,a);a.color=b.normalizeColor(a.color);return this},setTransform:function(a){this.matrix=
c.clone(a?c.normalize(a):c.identity);return this._applyTransform()},_applyTransform:function(){return this},moveToFront:function(){var a=this.getParent();a&&(a._moveChildToFront(this),this._moveToFront());return this},moveToBack:function(){var a=this.getParent();a&&(a._moveChildToBack(this),this._moveToBack());return this},_moveToFront:function(){},_moveToBack:function(){},applyRightTransform:function(a){return a?this.setTransform([this.matrix,a]):this},applyLeftTransform:function(a){return a?this.setTransform([a,
this.matrix]):this},applyTransform:function(a){return a?this.setTransform([this.matrix,a]):this},removeShape:function(a){this.parent&&this.parent.remove(this,a);return this},_setParent:function(a,c){this.parent=a;return this._updateParentMatrix(c)},_updateParentMatrix:function(a){this.parentMatrix=a?c.clone(a):null;return this._applyTransform()},_getRealMatrix:function(){for(var a=this.matrix,r=this.parent;r;)r.matrix&&(a=c.multiply(r.matrix,a)),r=r.parent;return a}});f._eventsProcessing={on:function(a,
c){return n(this.getEventSource(),a,f.fixCallback(this,b.fixTarget,c))},connect:function(a,c,f){"on"==a.substring(0,2)&&(a=a.substring(2));return this.on(a,f?g.hitch(c,f):c)},disconnect:function(a){return a.remove()}};f.fixCallback=function(a,c,f,d){d||(d=f,f=null);if(g.isString(d)){f=f||v.global;if(!f[d])throw['dojox.gfx.shape.fixCallback: scope["',d,'"] is null (scope\x3d"',f,'")'].join("");return function(n){return c(n,a)?f[d].apply(f,arguments||[]):void 0}}return!f?function(n){return c(n,a)?d.apply(f,
arguments):void 0}:function(n){return c(n,a)?d.apply(f,arguments||[]):void 0}};g.extend(f.Shape,f._eventsProcessing);f.Container={_init:function(){this.children=[];this._batch=0},openBatch:function(){return this},closeBatch:function(){return this},add:function(a){var c=a.getParent();c&&c.remove(a,!0);this.children.push(a);return a._setParent(this,this._getRealMatrix())},remove:function(a,c){for(var f=0;f<this.children.length;++f)if(this.children[f]==a){c||(a.parent=null,a.parentMatrix=null);this.children.splice(f,
1);break}return this},clear:function(a){for(var c,f=0;f<this.children.length;++f)c=this.children[f],c.parent=null,c.parentMatrix=null,a&&c.destroy();this.children=[];return this},getBoundingBox:function(){if(this.children){var a=null;d.forEach(this.children,function(f){var d=f.getBoundingBox();d&&((f=f.getTransform())&&(d=c.multiplyRectangle(f,d)),a?(a.x=Math.min(a.x,d.x),a.y=Math.min(a.y,d.y),a.endX=Math.max(a.endX,d.x+d.width),a.endY=Math.max(a.endY,d.y+d.height)):a={x:d.x,y:d.y,endX:d.x+d.width,
endY:d.y+d.height})});a&&(a.width=a.endX-a.x,a.height=a.endY-a.y);return a}return null},_moveChildToFront:function(a){for(var c=0;c<this.children.length;++c)if(this.children[c]==a){this.children.splice(c,1);this.children.push(a);break}return this},_moveChildToBack:function(a){for(var c=0;c<this.children.length;++c)if(this.children[c]==a){this.children.splice(c,1);this.children.unshift(a);break}return this}};f.Surface=h("dojox.gfx.shape.Surface",null,{constructor:function(){this._parent=this.rawNode=
null;this._nodes=[];this._events=[]},destroy:function(){d.forEach(this._nodes,m.destroy);this._nodes=[];d.forEach(this._events,function(a){a&&a.remove()});this._events=[];this.rawNode=null;if(q("ie"))for(;this._parent.lastChild;)m.destroy(this._parent.lastChild);else this._parent.innerHTML="";this._parent=null},getEventSource:function(){return this.rawNode},_getRealMatrix:function(){return null},isLoaded:!0,onLoad:function(a){},whenLoaded:function(a,c){var f=g.hitch(a,c);if(this.isLoaded)f(this);
else n.once(this,"load",function(a){f(a)})}});g.extend(f.Surface,f._eventsProcessing);f.Rect=h("dojox.gfx.shape.Rect",f.Shape,{constructor:function(a){this.shape=b.getDefault("Rect");this.rawNode=a},getBoundingBox:function(){return this.shape}});f.Ellipse=h("dojox.gfx.shape.Ellipse",f.Shape,{constructor:function(a){this.shape=b.getDefault("Ellipse");this.rawNode=a},getBoundingBox:function(){if(!this.bbox){var a=this.shape;this.bbox={x:a.cx-a.rx,y:a.cy-a.ry,width:2*a.rx,height:2*a.ry}}return this.bbox}});
f.Circle=h("dojox.gfx.shape.Circle",f.Shape,{constructor:function(a){this.shape=b.getDefault("Circle");this.rawNode=a},getBoundingBox:function(){if(!this.bbox){var a=this.shape;this.bbox={x:a.cx-a.r,y:a.cy-a.r,width:2*a.r,height:2*a.r}}return this.bbox}});f.Line=h("dojox.gfx.shape.Line",f.Shape,{constructor:function(a){this.shape=b.getDefault("Line");this.rawNode=a},getBoundingBox:function(){if(!this.bbox){var a=this.shape;this.bbox={x:Math.min(a.x1,a.x2),y:Math.min(a.y1,a.y2),width:Math.abs(a.x2-
a.x1),height:Math.abs(a.y2-a.y1)}}return this.bbox}});f.Polyline=h("dojox.gfx.shape.Polyline",f.Shape,{constructor:function(a){this.shape=b.getDefault("Polyline");this.rawNode=a},setShape:function(a,c){a&&a instanceof Array?(this.inherited(arguments,[{points:a}]),c&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.inherited(arguments,[a]);return this},_normalizePoints:function(){var a=this.shape.points,c=a&&a.length;if(c&&"number"==typeof a[0]){for(var f=[],d=0;d<c;d+=
2)f.push({x:a[d],y:a[d+1]});this.shape.points=f}},getBoundingBox:function(){if(!this.bbox&&this.shape.points.length){for(var a=this.shape.points,c=a.length,f=a[0],d=f.x,n=f.y,m=f.x,l=f.y,b=1;b<c;++b)f=a[b],d>f.x&&(d=f.x),m<f.x&&(m=f.x),n>f.y&&(n=f.y),l<f.y&&(l=f.y);this.bbox={x:d,y:n,width:m-d,height:l-n}}return this.bbox}});f.Image=h("dojox.gfx.shape.Image",f.Shape,{constructor:function(a){this.shape=b.getDefault("Image");this.rawNode=a},getBoundingBox:function(){return this.shape},setStroke:function(){return this},
setFill:function(){return this}});f.Text=h(f.Shape,{constructor:function(a){this.fontStyle=null;this.shape=b.getDefault("Text");this.rawNode=a},getFont:function(){return this.fontStyle},setFont:function(a){this.fontStyle="string"==typeof a?b.splitFontString(a):b.makeParameters(b.defaultFont,a);this._setFont();return this},getBoundingBox:function(){var a=null;this.getShape().text&&(a=b._base._computeTextBoundingBox(this));return a}});f.Creator={createShape:function(a){switch(a.type){case b.defaultPath.type:return this.createPath(a);
case b.defaultRect.type:return this.createRect(a);case b.defaultCircle.type:return this.createCircle(a);case b.defaultEllipse.type:return this.createEllipse(a);case b.defaultLine.type:return this.createLine(a);case b.defaultPolyline.type:return this.createPolyline(a);case b.defaultImage.type:return this.createImage(a);case b.defaultText.type:return this.createText(a);case b.defaultTextPath.type:return this.createTextPath(a)}return null},createGroup:function(){return this.createObject(b.Group)},createRect:function(a){return this.createObject(b.Rect,
a)},createEllipse:function(a){return this.createObject(b.Ellipse,a)},createCircle:function(a){return this.createObject(b.Circle,a)},createLine:function(a){return this.createObject(b.Line,a)},createPolyline:function(a){return this.createObject(b.Polyline,a)},createImage:function(a){return this.createObject(b.Image,a)},createText:function(a){return this.createObject(b.Text,a)},createPath:function(a){return this.createObject(b.Path,a)},createTextPath:function(a){return this.createObject(b.TextPath,{}).setText(a)},
createObject:function(a,c){return null}};return f})},"dojox/gfx/arc":function(){define(["./_base","dojo/_base/lang","./matrix"],function(b,g,h){function v(c){var f=Math.cos(c);c=Math.sin(c);var a={x:f+4/3*(1-f),y:c-4/3*f*(1-f)/c};return{s:{x:f,y:-c},c1:{x:a.x,y:-a.y},c2:a,e:{x:f,y:c}}}var q=2*Math.PI,n=Math.PI/4,d=Math.PI/8,m=n+d,x=v(d);return b.arc={unitArcAsBezier:v,curvePI4:x,arcAsBezier:function(c,f,a,b,g,w,p,u){g=Boolean(g);w=Boolean(w);var l=h._degToRad(b);b=f*f;var y=a*a,t=h.multiplyPoint(h.rotate(-l),
{x:(c.x-p)/2,y:(c.y-u)/2}),e=t.x*t.x,k=t.y*t.y;b=Math.sqrt((b*y-b*k-y*e)/(b*k+y*e));isNaN(b)&&(b=0);b={x:b*f*t.y/a,y:-b*a*t.x/f};g==w&&(b={x:-b.x,y:-b.y});b=h.multiplyPoint([h.translate((c.x+p)/2,(c.y+u)/2),h.rotate(l)],b);f=h.normalize([h.translate(b.x,b.y),h.rotate(l),h.scale(f,a)]);b=h.invert(f);c=h.multiplyPoint(b,c);u=h.multiplyPoint(b,p,u);p=Math.atan2(c.y,c.x);u=Math.atan2(u.y,u.x);b=p-u;w&&(b=-b);0>b?b+=q:b>q&&(b-=q);a=d;u=x;a=w?a:-a;c=[];for(g=b;0<g;g-=n)g<m&&(a=g/2,u=v(a),a=w?a:-a,g=0),
t=h.normalize([f,h.rotate(p+a)]),w?(b=h.multiplyPoint(t,u.c1),l=h.multiplyPoint(t,u.c2),t=h.multiplyPoint(t,u.e)):(b=h.multiplyPoint(t,u.c2),l=h.multiplyPoint(t,u.c1),t=h.multiplyPoint(t,u.s)),c.push([b.x,b.y,l.x,l.y,t.x,t.y]),p+=2*a;return c}}})},"dojox/gfx/gradient":function(){define(["dojo/_base/lang","./matrix","dojo/_base/Color"],function(b,g,h){function v(d,b,n,c,f,a){d=g.multiplyPoint(n,d,b);c=g.multiplyPoint(c,d);return{r:d,p:c,o:g.multiplyPoint(f,c).x/a}}function q(d,b){return d.o-b.o}var n=
b.getObject("dojox.gfx.gradient",!0);n.rescale=function(d,b,n){var c=d.length,f=n<b,a;f&&(a=b,b=n,n=a);if(!c)return[];if(n<=d[0].offset)a=[{offset:0,color:d[0].color},{offset:1,color:d[0].color}];else if(b>=d[c-1].offset)a=[{offset:0,color:d[c-1].color},{offset:1,color:d[c-1].color}];else{var g=n-b,s,q,p;a=[];0>b&&a.push({offset:0,color:new h(d[0].color)});for(p=0;p<c&&!(s=d[p],s.offset>=b);++p);p?(q=d[p-1],a.push({offset:0,color:h.blendColors(new h(q.color),new h(s.color),(b-q.offset)/(s.offset-
q.offset))})):a.push({offset:0,color:new h(s.color)});for(;p<c;++p){s=d[p];if(s.offset>=n)break;a.push({offset:(s.offset-b)/g,color:new h(s.color)})}p<c?(q=d[p-1],a.push({offset:1,color:h.blendColors(new h(q.color),new h(s.color),(n-q.offset)/(s.offset-q.offset))})):a.push({offset:1,color:new h(d[c-1].color)})}if(f){a.reverse();p=0;for(c=a.length;p<c;++p)s=a[p],s.offset=1-s.offset}return a};n.project=function(d,b,h,c,f,a){d=d||g.identity;var r=g.multiplyPoint(d,b.x1,b.y1),s=g.multiplyPoint(d,b.x2,
b.y2);f=Math.atan2(s.y-r.y,s.x-r.x);a=g.project(s.x-r.x,s.y-r.y);r=g.multiplyPoint(a,r);s=g.multiplyPoint(a,s);r=new g.Matrix2D([g.rotate(-f),{dx:-r.x,dy:-r.y}]);s=g.multiplyPoint(r,s).x;d=[v(h.x,h.y,d,a,r,s),v(c.x,c.y,d,a,r,s),v(h.x,c.y,d,a,r,s),v(c.x,h.y,d,a,r,s)].sort(q);b=n.rescale(b.colors,d[0].o,d[3].o);Math.atan2(d[3].r.y-d[0].r.y,d[3].r.x-d[0].r.x);return{type:"linear",x1:d[0].p.x,y1:d[0].p.y,x2:d[3].p.x,y2:d[3].p.y,colors:b,angle:f}};return n})},"dojox/gfx/path":function(){define(["./_base",
"dojo/_base/lang","dojo/_base/declare","./matrix","./shape"],function(b,g,h,v,q){q=h("dojox.gfx.path.Path",q.Shape,{constructor:function(n){this.shape=g.clone(b.defaultPath);this.segments=[];this.tbbox=null;this.absolute=!0;this.last={};this.rawNode=n;this.segmented=!1},setAbsoluteMode:function(b){this._confirmSegmented();this.absolute="string"==typeof b?"absolute"==b:b;return this},getAbsoluteMode:function(){this._confirmSegmented();return this.absolute},getBoundingBox:function(){this._confirmSegmented();
return this.bbox&&"l"in this.bbox?{x:this.bbox.l,y:this.bbox.t,width:this.bbox.r-this.bbox.l,height:this.bbox.b-this.bbox.t}:null},_getRealBBox:function(){this._confirmSegmented();if(this.tbbox)return this.tbbox;var b=this.bbox,d=this._getRealMatrix();this.bbox=null;for(var m=0,g=this.segments.length;m<g;++m)this._updateWithSegment(this.segments[m],d);d=this.bbox;this.bbox=b;return this.tbbox=d?[{x:d.l,y:d.t},{x:d.r,y:d.t},{x:d.r,y:d.b},{x:d.l,y:d.b}]:null},getLastPosition:function(){this._confirmSegmented();
return"x"in this.last?this.last:null},_applyTransform:function(){this.tbbox=null;return this.inherited(arguments)},_updateBBox:function(b,d,m){m&&(d=v.multiplyPoint(m,b,d),b=d.x,d=d.y);this.bbox&&"l"in this.bbox?(this.bbox.l>b&&(this.bbox.l=b),this.bbox.r<b&&(this.bbox.r=b),this.bbox.t>d&&(this.bbox.t=d),this.bbox.b<d&&(this.bbox.b=d)):this.bbox={l:b,b:d,r:b,t:d}},_updateWithSegment:function(n,d){var m=n.args,g=m.length,c;switch(n.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(c=
0;c<g;c+=2)this._updateBBox(m[c],m[c+1],d);this.last.x=m[g-2];this.last.y=m[g-1];this.absolute=!0;break;case "H":for(c=0;c<g;++c)this._updateBBox(m[c],this.last.y,d);this.last.x=m[g-1];this.absolute=!0;break;case "V":for(c=0;c<g;++c)this._updateBBox(this.last.x,m[c],d);this.last.y=m[g-1];this.absolute=!0;break;case "m":c=0;"x"in this.last||(this._updateBBox(this.last.x=m[0],this.last.y=m[1],d),c=2);for(;c<g;c+=2)this._updateBBox(this.last.x+=m[c],this.last.y+=m[c+1],d);this.absolute=!1;break;case "l":case "t":for(c=
0;c<g;c+=2)this._updateBBox(this.last.x+=m[c],this.last.y+=m[c+1],d);this.absolute=!1;break;case "h":for(c=0;c<g;++c)this._updateBBox(this.last.x+=m[c],this.last.y,d);this.absolute=!1;break;case "v":for(c=0;c<g;++c)this._updateBBox(this.last.x,this.last.y+=m[c],d);this.absolute=!1;break;case "c":for(c=0;c<g;c+=6)this._updateBBox(this.last.x+m[c],this.last.y+m[c+1],d),this._updateBBox(this.last.x+m[c+2],this.last.y+m[c+3],d),this._updateBBox(this.last.x+=m[c+4],this.last.y+=m[c+5],d);this.absolute=
!1;break;case "s":case "q":for(c=0;c<g;c+=4)this._updateBBox(this.last.x+m[c],this.last.y+m[c+1],d),this._updateBBox(this.last.x+=m[c+2],this.last.y+=m[c+3],d);this.absolute=!1;break;case "A":for(c=0;c<g;c+=7)this._updateBBox(m[c+5],m[c+6],d);this.last.x=m[g-2];this.last.y=m[g-1];this.absolute=!0;break;case "a":for(c=0;c<g;c+=7)this._updateBBox(this.last.x+=m[c+5],this.last.y+=m[c+6],d);this.absolute=!1}var f=[n.action];for(c=0;c<g;++c)f.push(b.formatNumber(m[c],!0));if("string"==typeof this.shape.path)this.shape.path+=
f.join("");else{c=0;for(g=f.length;c<g;++c)this.shape.path.push(f[c])}},_validSegments:{m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},_pushSegment:function(b,d){this.tbbox=null;var g=this._validSegments[b.toLowerCase()];"number"==typeof g&&(g?d.length>=g&&(g={action:b,args:d.slice(0,d.length-d.length%g)},this.segments.push(g),this._updateWithSegment(g)):(g={action:b,args:[]},this.segments.push(g),this._updateWithSegment(g)))},_collectArgs:function(b,d){for(var g=0;g<d.length;++g){var h=d[g];"boolean"==
typeof h?b.push(h?1:0):"number"==typeof h?b.push(h):h instanceof Array?this._collectArgs(b,h):"x"in h&&"y"in h&&b.push(h.x,h.y)}},moveTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?"M":"m",b);return this},lineTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?"L":"l",b);return this},hLineTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?
"H":"h",b);return this},vLineTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?"V":"v",b);return this},curveTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?"C":"c",b);return this},smoothCurveTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?"S":"s",b);return this},qCurveTo:function(){this._confirmSegmented();var b=
[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?"Q":"q",b);return this},qSmoothCurveTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?"T":"t",b);return this},arcTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?"A":"a",b);return this},closePath:function(){this._confirmSegmented();this._pushSegment("Z",[]);return this},_confirmSegmented:function(){if(!this.segmented){var b=
this.shape.path;this.shape.path=[];this._setPath(b);this.shape.path=this.shape.path.join("");this.segmented=!0}},_setPath:function(h){h=g.isArray(h)?h:h.match(b.pathSvgRegExp);this.segments=[];this.absolute=!0;this.bbox={};this.last={};if(h){for(var d="",m=[],q=h.length,c=0;c<q;++c){var f=h[c],a=parseFloat(f);isNaN(a)?(d&&this._pushSegment(d,m),m=[],d=f):m.push(a)}this._pushSegment(d,m)}},setShape:function(g){this.inherited(arguments,["string"==typeof g?{path:g}:g]);this.segmented=!1;this.segments=
[];b.lazyPathSegmentation||this._confirmSegmented();return this},_2PI:2*Math.PI});h=h("dojox.gfx.path.TextPath",q,{constructor:function(h){"text"in this||(this.text=g.clone(b.defaultTextPath));"fontStyle"in this||(this.fontStyle=g.clone(b.defaultFont))},getText:function(){return this.text},setText:function(g){this.text=b.makeParameters(this.text,"string"==typeof g?{text:g}:g);this._setText();return this},getFont:function(){return this.fontStyle},setFont:function(g){this.fontStyle="string"==typeof g?
b.splitFontString(g):b.makeParameters(b.defaultFont,g);this._setFont();return this}});return b.path={Path:q,TextPath:h}})},"*noref":1}});
define("dojox/gfx/vml","dojo/_base/lang dojo/_base/declare dojo/_base/array dojo/_base/Color dojo/_base/sniff dojo/_base/config dojo/dom dojo/dom-geometry dojo/dom-style dojo/_base/kernel ./_base ./shape ./path ./arc ./gradient ./matrix".split(" "),function(b,g,h,v,q,n,d,m,x,c,f,a,r,s,w,p){function u(e,k,a){a=a||c.global;k.call(a,e);(e instanceof f.Surface||e instanceof f.Group)&&h.forEach(e.children,function(e){u(e,k,a)})}var l=f.vml={},y=function(){l.xmlns="urn:schemas-microsoft-com:vml";try{document.namespaces.add("v",
l.xmlns);var e="* group roundrect oval shape rect imagedata path textpath text".split(" "),k=0,a=1,b=document.createStyleSheet();8<=q("ie")&&(k=1,a=e.length);for(;k<a;++k)b.addRule("v\\:"+e[k],"behavior:url(#default#VML); display:inline-block")}catch(c){setTimeout(y,10)}};y();l.text_alignment={start:"left",middle:"center",end:"right"};l._parseFloat=function(e){return e.match(/^\d+f$/i)?parseInt(e)/65536:parseFloat(e)};l._bool={t:1,"true":1};l._reparentEvents=function(e,k){for(var a in k)"on"==a.substr(0,
2).toLowerCase()&&(e[a]=k[a],k[a]=null)};l.Shape=g("dojox.gfx.vml.Shape",a.Shape,{setFill:function(e){if(!e)return this.fillStyle=null,this.rawNode.filled="f",this;var k,a,b;if("object"==typeof e&&"type"in e){switch(e.type){case "linear":var c=this._getRealMatrix(),d=this.getBoundingBox(),g=this._getRealBBox?this._getRealBBox():this.getTransformedBoundingBox();b=[];this.fillStyle!==e&&(this.fillStyle=f.makeParameters(f.defaultLinearGradient,e));e=f.gradient.project(c,this.fillStyle,{x:d.x,y:d.y},
{x:d.x+d.width,y:d.y+d.height},g[0],g[2]);a=e.colors;"0.00000"!=a[0].offset.toFixed(5)&&b.push("0 "+f.normalizeColor(a[0].color).toHex());for(k=0;k<a.length;++k)b.push(a[k].offset.toFixed(5)+" "+f.normalizeColor(a[k].color).toHex());k=a.length-1;"1.00000"!=a[k].offset.toFixed(5)&&b.push("1 "+f.normalizeColor(a[k].color).toHex());k=this.rawNode.fill;k.colors.value=b.join(";");k.method="sigma";k.type="gradient";k.angle=(270-p._radToDeg(e.angle))%360;k.on=!0;break;case "radial":this.fillStyle=e=f.makeParameters(f.defaultRadialGradient,
e);var c=parseFloat(this.rawNode.style.left),d=parseFloat(this.rawNode.style.top),g=parseFloat(this.rawNode.style.width),l=parseFloat(this.rawNode.style.height),m=isNaN(g)?1:2*e.r/g;a=[];0<e.colors[0].offset&&a.push({offset:1,color:f.normalizeColor(e.colors[0].color)});h.forEach(e.colors,function(e,k){a.push({offset:1-e.offset*m,color:f.normalizeColor(e.color)})});for(k=a.length-1;0<=k&&0>a[k].offset;)--k;if(k<a.length-1){b=a[k];var n=a[k+1];n.color=v.blendColors(b.color,n.color,b.offset/(b.offset-
n.offset));for(n.offset=0;2<a.length-k;)a.pop()}k=a.length-1;b=[];for(0<a[k].offset&&b.push("0 "+a[k].color.toHex());0<=k;--k)b.push(a[k].offset.toFixed(5)+" "+a[k].color.toHex());k=this.rawNode.fill;k.colors.value=b.join(";");k.method="sigma";k.type="gradientradial";isNaN(g)||isNaN(l)||isNaN(c)||isNaN(d)?k.focusposition="0.5 0.5":k.focusposition=((e.cx-c)/g).toFixed(5)+" "+((e.cy-d)/l).toFixed(5);k.focussize="0 0";k.on=!0;break;case "pattern":this.fillStyle=e=f.makeParameters(f.defaultPattern,e),
k=this.rawNode.fill,k.type="tile",k.src=e.src,e.width&&e.height&&(k.size.x=f.px2pt(e.width),k.size.y=f.px2pt(e.height)),k.alignShape="f",k.position.x=0,k.position.y=0,k.origin.x=e.width?e.x/e.width:0,k.origin.y=e.height?e.y/e.height:0,k.on=!0}this.rawNode.fill.opacity=1;return this}this.fillStyle=f.normalizeColor(e);(k=this.rawNode.fill)||(k=this.rawNode.ownerDocument.createElement("v:fill"));k.method="any";k.type="solid";k.opacity=this.fillStyle.a;if(b=this.rawNode.filters["DXImageTransform.Microsoft.Alpha"])b.opacity=
Math.round(100*this.fillStyle.a);this.rawNode.fillcolor=this.fillStyle.toHex();this.rawNode.filled=!0;return this},setStroke:function(e){if(!e)return this.strokeStyle=null,this.rawNode.stroked="f",this;if("string"==typeof e||b.isArray(e)||e instanceof v)e={color:e};e=this.strokeStyle=f.makeParameters(f.defaultStroke,e);e.color=f.normalizeColor(e.color);var k=this.rawNode;k.stroked=!0;k.strokecolor=e.color.toCss();k.strokeweight=e.width+"px";k.stroke&&(k.stroke.opacity=e.color.a,k.stroke.endcap=this._translate(this._capMap,
e.cap),"number"==typeof e.join?(k.stroke.joinstyle="miter",k.stroke.miterlimit=e.join):k.stroke.joinstyle=e.join,k.stroke.dashstyle="none"==e.style?"Solid":e.style);return this},_capMap:{butt:"flat"},_capMapReversed:{flat:"butt"},_translate:function(e,k){return k in e?e[k]:k},_applyTransform:function(){var e=this._getRealMatrix();if(e){var k=this.rawNode.skew;if("undefined"==typeof k)for(var a=0;a<this.rawNode.childNodes.length;++a)if("skew"==this.rawNode.childNodes[a].tagName){k=this.rawNode.childNodes[a];
break}if(k){k.on="f";var a=e.xx.toFixed(8)+" "+e.xy.toFixed(8)+" "+e.yx.toFixed(8)+" "+e.yy.toFixed(8)+" 0 0",e=Math.floor(e.dx).toFixed()+"px "+Math.floor(e.dy).toFixed()+"px",b=this.rawNode.style,c=parseFloat(b.left),f=parseFloat(b.top),d=parseFloat(b.width),b=parseFloat(b.height);isNaN(c)&&(c=0);isNaN(f)&&(f=0);if(isNaN(d)||!d)d=1;if(isNaN(b)||!b)b=1;c=(-c/d-0.5).toFixed(8)+" "+(-f/b-0.5).toFixed(8);k.matrix=a;k.origin=c;k.offset=e;k.on=!0}}this.fillStyle&&"linear"==this.fillStyle.type&&this.setFill(this.fillStyle);
this.clip&&this.setClip(this.clip);return this},_setDimensions:function(e,a){return this},setRawNode:function(e){e.stroked="f";e.filled="f";this.rawNode=e;this.rawNode.__gfxObject__=this},_moveToFront:function(){this.rawNode.parentNode.appendChild(this.rawNode);return this},_moveToBack:function(){var e=this.rawNode,a=e.parentNode,b=a.firstChild;a.insertBefore(e,b);"rect"==b.tagName&&b.swapNode(e);return this},_getRealMatrix:function(){return this.parentMatrix?new p.Matrix2D([this.parentMatrix,this.matrix]):
this.matrix},setClip:function(e){this.inherited(arguments);var a=this.rawNode.style;if(e){if("width"in e){var b=this._getRealMatrix(),c=parseFloat(a.left),f=parseFloat(a.top);isNaN(c)&&(c=0);isNaN(f)&&(f=0);var d=p.multiplyRectangle(b,e),b=p.multiplyPoint(b,{x:c,y:f});a.clip="rect("+Math.round(d.y-b.y)+"px "+Math.round(d.x-b.x+d.width)+"px "+Math.round(d.y-b.y+d.height)+"px "+Math.round(d.x-b.x)+"px)"}}else a.position="absolute",a.clip="rect(0px "+a.width+" "+a.height+" 0px)";return this}});(function(){var e=
l.Shape,a=e.prototype.setStroke,b=e.prototype.setFill;e.prototype.setStroke=function(){var e=a.apply(this,arguments),b=this.rawNode,b=b&&b.stroke,c=this.getParent();b&&c&&(b.opacity*=void 0!==c._esriIeOpacity&&null!==c._esriIeOpacity?c._esriIeOpacity:1);return e};e.prototype.setFill=function(){var e=b.apply(this,arguments),a=this.rawNode,k=a&&a.fill,c=this.getParent();k&&c&&(c=void 0!==c._esriIeOpacity&&null!==c._esriIeOpacity?c._esriIeOpacity:1,"tile"===k.type?x.set(a,"opacity",c):k.opacity*=c);
return e}})();l.Group=g("dojox.gfx.vml.Group",l.Shape,{constructor:function(){a.Container._init.call(this)},_applyTransform:function(){for(var e=this._getRealMatrix(),a=0;a<this.children.length;++a)this.children[a]._updateParentMatrix(e);this.clip&&this.setClip(this.clip);return this},_setDimensions:function(e,a){var b=this.rawNode,c=b.style,f=this.bgNode.style;c.width=e;c.height=a;b.coordsize=e+" "+a;f.width=e;f.height=a;for(b=0;b<this.children.length;++b)this.children[b]._setDimensions(e,a);return this},
setClip:function(e){this.clip=e;var a=this.rawNode.style;if(e){if("width"in e){var b=this._getRealMatrix();e=p.multiplyRectangle(b,e);var c=this.getBoundingBox(),b=(c=c?p.multiplyRectangle(b,c):null)&&0>c.x?c.x:0,c=c&&0>c.y?c.y:0;a.position="absolute";a.clip="rect("+Math.round(e.y-c)+"px "+Math.round(e.x+e.width-b)+"px "+Math.round(e.y+e.height-c)+"px "+Math.round(e.x-b)+"px)"}}else a.position="absolute",a.clip="rect(0px "+a.width+" "+a.height+" 0px)";return this},destroy:function(){this.clear(!0);
l.Shape.prototype.destroy.apply(this,arguments)}});l.Group.nodeType="group";l.Rect=g("dojox.gfx.vml.Rect",[l.Shape,a.Rect],{setShape:function(e){e=this.shape=f.makeParameters(this.shape,e);this.bbox=null;var a=Math.min(1,e.r/Math.min(parseFloat(e.width),parseFloat(e.height))).toFixed(8),b=this.rawNode.parentNode,c=null;if(b){if(b.lastChild!==this.rawNode)for(var d=0;d<b.childNodes.length;++d)if(b.childNodes[d]===this.rawNode){c=b.childNodes[d+1];break}b.removeChild(this.rawNode)}7<q("ie")?(d=this.rawNode.ownerDocument.createElement("v:roundrect"),
d.arcsize=a,d.style.display="inline-block",l._reparentEvents(d,this.rawNode),this.rawNode=d,this.rawNode.__gfxObject__=this):this.rawNode.arcsize=a;b&&(c?b.insertBefore(this.rawNode,c):b.appendChild(this.rawNode));a=this.rawNode.style;a.left=e.x.toFixed();a.top=e.y.toFixed();a.width="string"==typeof e.width&&0<=e.width.indexOf("%")?e.width:Math.max(e.width.toFixed(),0);a.height="string"==typeof e.height&&0<=e.height.indexOf("%")?e.height:Math.max(e.height.toFixed(),0);return this.setTransform(this.matrix).setFill(this.fillStyle).setStroke(this.strokeStyle)}});
l.Rect.nodeType="roundrect";l.Ellipse=g("dojox.gfx.vml.Ellipse",[l.Shape,a.Ellipse],{setShape:function(e){e=this.shape=f.makeParameters(this.shape,e);this.bbox=null;var a=this.rawNode.style;a.left=(e.cx-e.rx).toFixed();a.top=(e.cy-e.ry).toFixed();a.width=(2*e.rx).toFixed();a.height=(2*e.ry).toFixed();return this.setTransform(this.matrix)}});l.Ellipse.nodeType="oval";l.Circle=g("dojox.gfx.vml.Circle",[l.Shape,a.Circle],{setShape:function(e){e=this.shape=f.makeParameters(this.shape,e);this.bbox=null;
var a=this.rawNode.style;a.left=(e.cx-e.r).toFixed();a.top=(e.cy-e.r).toFixed();a.width=(2*e.r).toFixed();a.height=(2*e.r).toFixed();return this}});l.Circle.nodeType="oval";l.Line=g("dojox.gfx.vml.Line",[l.Shape,a.Line],{constructor:function(e){e&&e.setAttribute("dojoGfxType","line")},setShape:function(e){e=this.shape=f.makeParameters(this.shape,e);this.bbox=null;this.rawNode.path.v="m"+e.x1.toFixed()+" "+e.y1.toFixed()+"l"+e.x2.toFixed()+" "+e.y2.toFixed()+"e";return this.setTransform(this.matrix)}});
l.Line.nodeType="shape";l.Polyline=g("dojox.gfx.vml.Polyline",[l.Shape,a.Polyline],{constructor:function(e){e&&e.setAttribute("dojoGfxType","polyline")},setShape:function(e,a){e&&e instanceof Array?(this.shape=f.makeParameters(this.shape,{points:e}),a&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.shape=f.makeParameters(this.shape,e);this.bbox=null;this._normalizePoints();var b=[],c=this.shape.points;if(0<c.length&&(b.push("m"),b.push(c[0].x.toFixed(),c[0].y.toFixed()),
1<c.length)){b.push("l");for(var d=1;d<c.length;++d)b.push(c[d].x.toFixed(),c[d].y.toFixed())}b.push("e");this.rawNode.path.v=b.join(" ");return this.setTransform(this.matrix)}});l.Polyline.nodeType="shape";l.Image=g("dojox.gfx.vml.Image",[l.Shape,a.Image],{setShape:function(e){e=this.shape=f.makeParameters(this.shape,e);this.bbox=null;this.rawNode.firstChild.src=e.src;return this.setTransform(this.matrix)},_applyTransform:function(){var e=this._getRealMatrix(),a=this.rawNode,b=a.style,c=this.shape,
e=e?p.multiply(e,{dx:c.x,dy:c.y}):p.normalize({dx:c.x,dy:c.y});if(0==e.xy&&0==e.yx&&0<e.xx&&0<e.yy)b.filter="",b.width=Math.floor(e.xx*c.width),b.height=Math.floor(e.yy*c.height),b.left=Math.floor(e.dx),b.top=Math.floor(e.dy);else{var d=a.parentNode.style;b.left="0px";b.top="0px";b.width=d.width;b.height=d.height;e=p.multiply(e,{xx:c.width/parseInt(b.width),yy:c.height/parseInt(b.height)});(a=a.filters["DXImageTransform.Microsoft.Matrix"])?(a.M11=e.xx,a.M12=e.xy,a.M21=e.yx,a.M22=e.yy,a.Dx=e.dx,a.Dy=
e.dy):b.filter="progid:DXImageTransform.Microsoft.Matrix(M11\x3d"+e.xx+", M12\x3d"+e.xy+", M21\x3d"+e.yx+", M22\x3d"+e.yy+", Dx\x3d"+e.dx+", Dy\x3d"+e.dy+")"}return this},_setDimensions:function(e,a){var b=this.rawNode;return b.filters["DXImageTransform.Microsoft.Matrix"]?(b=b.style,b.width=e,b.height=a,this._applyTransform()):this}});l.Image.nodeType="rect";l.Text=g("dojox.gfx.vml.Text",[l.Shape,a.Text],{constructor:function(e){e&&e.setAttribute("dojoGfxType","text");this.fontStyle=null},_alignment:{start:"left",
middle:"center",end:"right"},setShape:function(e){this.shape=f.makeParameters(this.shape,e);this.bbox=null;var a=this.rawNode;e=this.shape;var b=e.x,c=e.y.toFixed();switch(e.align){case "middle":b-=5;break;case "end":b-=10}for(var c="m"+b.toFixed()+","+c+"l"+(b+10).toFixed()+","+c+"e",d=null,b=null,g=a.childNodes,h=0;h<g.length;++h){var m=g[h].tagName;if("path"==m){if(d=g[h],b)break}else if("textpath"==m&&(b=g[h],d))break}d||(d=a.ownerDocument.createElement("v:path"),a.appendChild(d));b||(b=a.ownerDocument.createElement("v:textpath"),
a.appendChild(b));d.v=c;d.textPathOk=!0;b.on=!0;a=l.text_alignment[e.align];b.style["v-text-align"]=a?a:"left";b.style["text-decoration"]=e.decoration;b.style["v-rotate-letters"]=e.rotated;b.style["v-text-kern"]=e.kerning;b.string=e.text;return this.setTransform(this.matrix)},_setFont:function(){for(var e=this.fontStyle,a=this.rawNode.childNodes,b=0;b<a.length;++b)if("textpath"==a[b].tagName){a[b].style.font=f.makeFontString(e);break}this.setTransform(this.matrix)},_getRealMatrix:function(){var e=
this.inherited(arguments);e&&(e=p.multiply(e,{dy:0.35*-f.normalizedLength(this.fontStyle?this.fontStyle.size:"10pt")}));return e},getTextWidth:function(){var e=this.rawNode,a=e.style.display;e.style.display="inline";var b=f.pt2px(parseFloat(e.currentStyle.width));e.style.display=a;return b}});l.Text.nodeType="shape";l.Path=g("dojox.gfx.vml.Path",[l.Shape,r.Path],{constructor:function(e){e&&!e.getAttribute("dojoGfxType")&&e.setAttribute("dojoGfxType","path");this.vmlPath="";this.lastControl={}},_updateWithSegment:function(e){var a=
b.clone(this.last);this.inherited(arguments);1<arguments.length||(a=this[this.renderers[e.action]](e,a),"string"==typeof this.vmlPath?(this.vmlPath+=a.join(""),this.rawNode.path.v=this.vmlPath+" r0,0 e"):Array.prototype.push.apply(this.vmlPath,a))},setShape:function(e){this.vmlPath=[];this.lastControl.type="";this.inherited(arguments);this.vmlPath=this.vmlPath.join("");this.rawNode.path.v=this.vmlPath+" r0,0 e";return this},_pathVmlToSvgMap:{m:"M",l:"L",t:"m",r:"l",c:"C",v:"c",qb:"Q",x:"z",e:""},
renderers:{M:"_moveToA",m:"_moveToR",L:"_lineToA",l:"_lineToR",H:"_hLineToA",h:"_hLineToR",V:"_vLineToA",v:"_vLineToR",C:"_curveToA",c:"_curveToR",S:"_smoothCurveToA",s:"_smoothCurveToR",Q:"_qCurveToA",q:"_qCurveToR",T:"_qSmoothCurveToA",t:"_qSmoothCurveToR",A:"_arcTo",a:"_arcTo",Z:"_closePath",z:"_closePath"},_addArgs:function(e,a,b,c){for(a=a instanceof Array?a:a.args;b<c;++b)e.push(" ",a[b].toFixed())},_adjustRelCrd:function(e,a,b){a=a instanceof Array?a:a.args;var c=a.length,d=Array(c),f=0,g=
e.x;e=e.y;"number"!=typeof g&&(d[0]=g=a[0],d[1]=e=a[1],f=2);if("number"==typeof b&&2!=b)for(var h=b;h<=c;){for(;f<h;f+=2)d[f]=g+a[f],d[f+1]=e+a[f+1];g=d[h-2];e=d[h-1];h+=b}else for(;f<c;f+=2)d[f]=g+=a[f],d[f+1]=e+=a[f+1];return d},_adjustRelPos:function(a,b){for(var c=b instanceof Array?b:b.args,d=c.length,f=Array(d),g=0;g<d;++g)f[g]=a+=c[g];return f},_moveToA:function(a){var b=[" m"];a=a instanceof Array?a:a.args;var c=a.length;this._addArgs(b,a,0,2);2<c&&(b.push(" l"),this._addArgs(b,a,2,c));this.lastControl.type=
"";return b},_moveToR:function(a,b){return this._moveToA(this._adjustRelCrd(b,a))},_lineToA:function(a){var b=[" l"];a=a instanceof Array?a:a.args;this._addArgs(b,a,0,a.length);this.lastControl.type="";return b},_lineToR:function(a,b){return this._lineToA(this._adjustRelCrd(b,a))},_hLineToA:function(a,b){for(var c=[" l"],d=" "+b.y.toFixed(),f=a instanceof Array?a:a.args,g=f.length,h=0;h<g;++h)c.push(" ",f[h].toFixed(),d);this.lastControl.type="";return c},_hLineToR:function(a,b){return this._hLineToA(this._adjustRelPos(b.x,
a),b)},_vLineToA:function(a,b){for(var c=[" l"],d=" "+b.x.toFixed(),f=a instanceof Array?a:a.args,g=f.length,h=0;h<g;++h)c.push(d," ",f[h].toFixed());this.lastControl.type="";return c},_vLineToR:function(a,b){return this._vLineToA(this._adjustRelPos(b.y,a),b)},_curveToA:function(a){var b=[];a=a instanceof Array?a:a.args;for(var c=a.length,d=this.lastControl,f=0;f<c;f+=6)b.push(" c"),this._addArgs(b,a,f,f+6);d.x=a[c-4];d.y=a[c-3];d.type="C";return b},_curveToR:function(a,b){return this._curveToA(this._adjustRelCrd(b,
a,6))},_smoothCurveToA:function(a,b){var c=[],d=a instanceof Array?a:a.args,f=d.length,g=this.lastControl,h=0;"C"!=g.type&&(c.push(" c"),this._addArgs(c,[b.x,b.y],0,2),this._addArgs(c,d,0,4),g.x=d[0],g.y=d[1],g.type="C",h=4);for(;h<f;h+=4)c.push(" c"),this._addArgs(c,[2*b.x-g.x,2*b.y-g.y],0,2),this._addArgs(c,d,h,h+4),g.x=d[h],g.y=d[h+1];return c},_smoothCurveToR:function(a,b){return this._smoothCurveToA(this._adjustRelCrd(b,a,4),b)},_qCurveToA:function(a){var b=[];a=a instanceof Array?a:a.args;for(var c=
a.length,d=this.lastControl,f=0;f<c;f+=4)b.push(" qb"),this._addArgs(b,a,f,f+4);d.x=a[c-4];d.y=a[c-3];d.type="Q";return b},_qCurveToR:function(a,b){return this._qCurveToA(this._adjustRelCrd(b,a,4))},_qSmoothCurveToA:function(a,b){var c=[],d=a instanceof Array?a:a.args,f=d.length,g=this.lastControl,h=0;"Q"!=g.type&&(c.push(" qb"),this._addArgs(c,[g.x=b.x,g.y=b.y],0,2),g.type="Q",this._addArgs(c,d,0,2),h=2);for(;h<f;h+=2)c.push(" qb"),this._addArgs(c,[g.x=2*b.x-g.x,g.y=2*b.y-g.y],0,2),this._addArgs(c,
d,h,h+2);return c},_qSmoothCurveToR:function(a,b){return this._qSmoothCurveToA(this._adjustRelCrd(b,a,2),b)},_arcTo:function(a,b){for(var c=[],d=a.args,f=d.length,g="a"==a.action,h=0;h<f;h+=7){var l=d[h+5],m=d[h+6];g&&(l+=b.x,m+=b.y);for(var n=s.arcAsBezier(b,d[h],d[h+1],d[h+2],d[h+3]?1:0,d[h+4]?1:0,l,m),p=0;p<n.length;++p){c.push(" c");var q=n[p];this._addArgs(c,q,0,q.length);this._updateBBox(q[0],q[1]);this._updateBBox(q[2],q[3]);this._updateBBox(q[4],q[5])}b.x=l;b.y=m}this.lastControl.type="";
return c},_closePath:function(){this.lastControl.type="";return["x"]},_getRealBBox:function(){this._confirmSegmented();if(this.tbbox)return this.tbbox;"string"==typeof this.shape.path&&(this.shape.path="");return this.inherited(arguments)}});l.Path.nodeType="shape";l.EsriPath=g("dojox.gfx.vml.EsriPath",l.Path,{setShape:function(a){this.rawNode.path.v=this.vmlPath=a;return this}});l.EsriPath.nodeType="shape";l.TextPath=g("dojox.gfx.vml.TextPath",[l.Path,r.TextPath],{constructor:function(a){a&&a.setAttribute("dojoGfxType",
"textpath");this.fontStyle=null;"text"in this||(this.text=b.clone(f.defaultTextPath));"fontStyle"in this||(this.fontStyle=b.clone(f.defaultFont))},setText:function(a){this.text=f.makeParameters(this.text,"string"==typeof a?{text:a}:a);this._setText();return this},setFont:function(a){this.fontStyle="string"==typeof a?f.splitFontString(a):f.makeParameters(f.defaultFont,a);this._setFont();return this},_setText:function(){this.bbox=null;for(var a=this.rawNode,b=this.text,c=null,d=null,f=a.childNodes,
g=0;g<f.length;++g){var h=f[g].tagName;if("path"==h){if(c=f[g],d)break}else if("textpath"==h&&(d=f[g],c))break}c||(c=this.rawNode.ownerDocument.createElement("v:path"),a.appendChild(c));d||(d=this.rawNode.ownerDocument.createElement("v:textpath"),a.appendChild(d));c.textPathOk=!0;d.on=!0;a=l.text_alignment[b.align];d.style["v-text-align"]=a?a:"left";d.style["text-decoration"]=b.decoration;d.style["v-rotate-letters"]=b.rotated;d.style["v-text-kern"]=b.kerning;d.string=b.text},_setFont:function(){for(var a=
this.fontStyle,b=this.rawNode.childNodes,c=0;c<b.length;++c)if("textpath"==b[c].tagName){b[c].style.font=f.makeFontString(a);break}}});l.TextPath.nodeType="shape";l.Surface=g("dojox.gfx.vml.Surface",a.Surface,{constructor:function(){a.Container._init.call(this)},destroy:function(){this.clear(!0);this.inherited(arguments)},setDimensions:function(a,b){this.width=f.normalizedLength(a);this.height=f.normalizedLength(b);if(!this.rawNode)return this;var c=this.clipNode.style,d=this.rawNode,g=d.style,h=
this.bgNode.style,l=this._parent.style;l.width=a;l.height=b;c.width=a;c.height=b;c.clip="rect(0px "+a+"px "+b+"px 0px)";g.width=a;g.height=b;d.coordsize=a+" "+b;h.width=a;h.height=b;for(c=0;c<this.children.length;++c)this.children[c]._setDimensions(a,b);return this},getDimensions:function(){var a=this.rawNode?{width:f.normalizedLength(this.rawNode.style.width),height:f.normalizedLength(this.rawNode.style.height)}:null;0>=a.width&&(a.width=this.width);0>=a.height&&(a.height=this.height);return a}});
l.createSurface=function(a,b,c){if(!b&&!c){var g=m.position(a);b=b||g.w;c=c||g.h}"number"==typeof b&&(b+="px");"number"==typeof c&&(c+="px");g=new l.Surface;a=d.byId(a);var h=g.clipNode=a.ownerDocument.createElement("div"),n=g.rawNode=a.ownerDocument.createElement("v:group"),p=h.style,r=n.style;7<q("ie")&&(r.display="inline-block");g._parent=a;g._nodes.push(h);a.style.width=b;a.style.height=c;p.position="absolute";p.width=b;p.height=c;p.clip="rect(0px "+b+" "+c+" 0px)";r.position="absolute";r.width=
b;r.height=c;n.coordsize=("100%"===b?b:parseFloat(b))+" "+("100%"===c?c:parseFloat(c));n.coordorigin="0 0";var p=g.bgNode=n.ownerDocument.createElement("v:rect"),s=p.style;s.left=s.top=0;s.width=r.width;s.height=r.height;p.filled=p.stroked="f";n.appendChild(p);h.appendChild(n);a.appendChild(h);g.width=f.normalizedLength(b);g.height=f.normalizedLength(c);return g};g=function(a){if(this!=a.getParent()){var b=a.getParent();b&&b.remove(a);this.rawNode.appendChild(a.rawNode);t.add.apply(this,arguments);
u(this,function(a){"function"==typeof a.getFont&&(a.setShape(a.getShape()),a.setFont(a.getFont()));"function"==typeof a.setFill&&(a.setFill(a.getFill()),a.setStroke(a.getStroke()))})}return this};r=function(a){this!=a.getParent()&&(this.rawNode.appendChild(a.rawNode),a.getParent()||(a.setFill(a.getFill()),a.setStroke(a.getStroke())),t.add.apply(this,arguments));return this};var t=a.Container;n={add:!0===n.fixVmlAdd?g:r,remove:function(a,b){this==a.getParent()&&(this.rawNode==a.rawNode.parentNode&&
this.rawNode.removeChild(a.rawNode),t.remove.apply(this,arguments));return this},clear:function(){for(var a=this.rawNode;a.firstChild!=a.lastChild;)a.firstChild!=this.bgNode&&a.removeChild(a.firstChild),a.lastChild!=this.bgNode&&a.removeChild(a.lastChild);return t.clear.apply(this,arguments)},getBoundingBox:t.getBoundingBox,_moveChildToFront:t._moveChildToFront,_moveChildToBack:t._moveChildToBack};g={createGroup:function(){var a=this.createObject(l.Group,null),b=a.rawNode.ownerDocument.createElement("v:rect");
b.style.left=b.style.top=0;b.style.width=a.rawNode.style.width;b.style.height=a.rawNode.style.height;b.filled=b.stroked="f";a.rawNode.appendChild(b);a.bgNode=b;return a},createImage:function(a){if(!this.rawNode)return null;var b=new l.Image,c=this.rawNode.ownerDocument,d=c.createElement("v:rect");d.stroked="f";d.style.width=this.rawNode.style.width;d.style.height=this.rawNode.style.height;c=c.createElement("v:imagedata");d.appendChild(c);b.setRawNode(d);this.rawNode.appendChild(d);b.setShape(a);this.add(b);
return b},createRect:function(a){if(!this.rawNode)return null;var b=new l.Rect,c=this.rawNode.ownerDocument.createElement("v:roundrect");7<q("ie")&&(c.style.display="inline-block");b.setRawNode(c);this.rawNode.appendChild(c);b.setShape(a);this.add(b);return b},createObject:function(a,b){if(!this.rawNode)return null;var c=new a,d=this.rawNode.ownerDocument.createElement("v:"+a.nodeType);c.setRawNode(d);this.rawNode.appendChild(d);switch(a){case l.Group:case l.Line:case l.Polyline:case l.Image:case l.Text:case l.Path:case l.TextPath:this._overrideSize(d)}c.setShape(b);
this.add(c);return c},_overrideSize:function(a){var b=this.rawNode.style,c=b.width,b=b.height;a.style.width=c;a.style.height=b;a.coordsize=parseInt(c)+" "+parseInt(b)}};b.extend(l.Group,n);b.extend(l.Group,a.Creator);b.extend(l.Group,g);b.extend(l.Surface,n);b.extend(l.Surface,a.Creator);b.extend(l.Surface,g);l.fixTarget=function(a,b){a.gfxTarget||(a.gfxTarget=a.target.__gfxObject__);return!0};return l});